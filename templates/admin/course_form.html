{% extends "admin/base.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<h1 class="mb-4">{{ title }}</h1>
<div class="card shadow">
    <div class="card-body">
        <form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
            {{ form.csrf_token }}
            <div class="mb-3">
                {{ form.title.label(class="form-label") }}
                {{ form.title(class="form-control") }}
                {% if form.title.errors %}
                    <div class="text-danger">
                        {% for error in form.title.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.description.label(class="form-label") }}
                {{ form.description(class="form-control", rows=6) }}
                {% if form.description.errors %}
                    <div class="text-danger">
                        {% for error in form.description.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.price.label(class="form-label") }}
                {{ form.price(class="form-control") }}
                {% if form.price.errors %}
                    <div class="text-danger">
                        {% for error in form.price.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.access_url.label(class="form-label") }}
                {{ form.access_url(class="form-control") }}
                {% if form.access_url.errors %}
                    <div class="text-danger">
                        {% for error in form.access_url.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.purchase_link.label(class="form-label") }}
                {{ form.purchase_link(class="form-control") }}
                {% if form.purchase_link.errors %}
                    <div class="text-danger">
                        {% for error in form.purchase_link.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.image.label(class="form-label") }}
                {{ form.image(class="form-control") }}
                {% if form.image.errors %}
                    <div class="text-danger">
                        {% for error in form.image.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if course and course.image %}
                    <div class="mt-2">
                        <img src="{{ url_for('static', filename='uploads/courses/' + course.image) }}" class="img-thumbnail" style="max-height:200px;" alt="{{ course.title }}">
                    </div>
                {% endif %}
            </div>
            <div class="mb-3">
                {{ form.video.label(class="form-label") }}
                {{ form.video(class="form-control") }}
                {% if form.video.errors %}
                    <div class="text-danger">
                        {% for error in form.video.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            <div class="form-check form-switch mb-4">
                {{ form.is_active(class="form-check-input") }}
                {{ form.is_active.label(class="form-check-label") }}
            </div>
            <div class="d-flex justify-content-between">
                <a href="{{ url_for('admin_bp.courses') }}" class="btn btn-secondary">Cancelar</a>
                {{ form.submit(class="btn btn-primary") }}
            </div>
        </form>
    </div>
</div>
{% endblock %}
